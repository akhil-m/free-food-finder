{% extends "base.html" %}

{% load comments %}
{% load bootstrap3 %}


{% block content %}
	<div class="panel panel-primary">
		<div class="panel-heading">
	    	<h3 class="panel-title">{{ event.event_name }}</h3>
	  	</div>
		<div class="panel-body">
			<p class="list-group-item-text">
				<strong>Time: </strong> {{ event.event_time }}
			</p>
			<p class="list-group-item-text">
				<strong>Date: </strong> {{ event.event_date }}
			</p>
			<p class="list-group-item-text">
				<strong>Location: </strong> {{ event.event_location }}
			</p>
			<p class="list-group-item-text">
				<strong>Info: </strong> {{ event.event_description }}
			</p>
		 </div>
         <div class="panel-footer">
            {% if user.is_authenticated %}
            <form class="post-form" action="" method="POST">
                {% csrf_token %}
                <input type="number" name="rating" id="some_id" class="rating" style="display:inline" />
                <input type="submit" class="btn btn-default btn-sm" value="Add Rating" id="id_submit" style="float:right;position:relative;bottom:18px" />
            </form>
            {% endif %}
        </div>
    </div>

    {% if user.is_authenticated %}
    {% get_comment_form for event as form %}
    <form class="post-form" action="{% comment_form_target %}" method="POST">
    {% csrf_token %}
    <div class="form-group">
        <label for="comment">Comment</label>
        <textarea class="form-control" id="id_comment" name="comment"></textarea>
    </div>
    <span style="display:none">{{ form.honeypot }}</span>
    {{ form.content_type }}
    {{ form.object_pk }}
    {{ form.timestamp }}
    {{ form.security_hash }}
    <input type="hidden" name="next" value="{% url 'event_detail_view' event.id %}" />
    <input type="submit" class="btn btn-default" value="Add comment" id="id_submit" />
    </form>
    {% endif %}

    {% get_comment_list for event as comment_list %}
    {% for comment in comment_list %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title" style="display:inline-block">{{ comment.user_name }}</h3>
                <p class="panel-heading" style="display:inline-block;float:right;position:relative;bottom:10px">{{ comment.submit_date }}</p>
            </div>
            <div class="panel-body">
                {{ comment.comment }}
            </div>
        </div>
    {% endfor %}
{% endblock %}
